<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>–ê–Ω–∫–µ—Ç–∞ ‚Äî –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ü–ü–í–ó</title>
  <link rel="stylesheet" href="assets/style.css">

  <!-- Yandex.Metrika counter -->
  <script type="text/javascript">
    (function(m,e,t,r,i,k,a){
        m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
        m[i].l=1*new Date();
        for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
        k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)
    })(window, document,'script','https://mc.yandex.ru/metrika/tag.js?id=105215494', 'ym');

    ym(105215494, 'init', {
      ssr:true, webvisor:true, clickmap:true, ecommerce:"dataLayer",
      accurateTrackBounce:true, trackLinks:true
    });
  </script>
  <noscript>
    <div><img src="https://mc.yandex.ru/watch/105215494" style="position:absolute; left:-9999px;" alt="" /></div>
  </noscript>
  <!-- /Yandex.Metrika counter -->
</head>

<body>

<header>
  <div class="wrap nav">
    <a class="logo-text" href="index.html">WILDBERRIES</a>
    <input type="checkbox" id="menu-toggle" class="menu-toggle" hidden>
    <label for="menu-toggle" class="nav-dots" aria-label="–ú–µ–Ω—é" role="button"></label>
    <nav>
      <ul>
        <li><a href="index.html">üè† –ì–ª–∞–≤–Ω–∞—è</a></li>
        <li><a href="about.html">üßë‚Äçüíº –í–∞–∫–∞–Ω—Å–∏—è</a></li>
        <li><a href="pay.html">üí∞ –ó–∞—Ä–ø–ª–∞—Ç–∞</a></li>
        <li><a href="form.html" class="active">üìù –ê–Ω–∫–µ—Ç–∞</a></li>
        <li><a href="reviews.html">‚≠ê –û—Ç–∑—ã–≤—ã</a></li>
      </ul>
    </nav>
  </div>
</header>

<section class="wrap">
  <h2 class="section-title">–ê–Ω–∫–µ—Ç–∞ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞</h2>
  <p class="muted">–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∫–æ—Ä–æ—Ç–∫—É—é —Ñ–æ—Ä–º—É ‚Äî –º—ã —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π —Ç—Ä–µ–∫-–∫–æ–¥ –∏ –ø–æ–¥—Å–∫–∞–∂–µ–º, —á—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ.</p>

  <form id="applyForm" class="wb-form" novalidate>
    <h2 class="wb-title">–ê–Ω–∫–µ—Ç–∞ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞</h2>
    <div class="wb-grid">
      <div class="wb-field">
        <label class="wb-label req">–ò–º—è</label>
        <input class="wb-input" name="firstName" type="text" placeholder="–í–∞—à–µ –∏–º—è" required>
      </div>

      <div class="wb-field">
        <label class="wb-label req">–§–∞–º–∏–ª–∏—è</label>
        <input class="wb-input" name="lastName" type="text" placeholder="–í–∞—à–∞ —Ñ–∞–º–∏–ª–∏—è" required>
      </div>

      <div class="wb-field">
        <label class="wb-label req">–û—Ç—á–µ—Å—Ç–≤–æ</label>
        <input class="wb-input" name="middleName" type="text" placeholder="–í–∞—à–µ –æ—Ç—á–µ—Å—Ç–≤–æ" required>
      </div>

      <div class="wb-field">
        <label class="wb-label req">–¢–µ–ª–µ—Ñ–æ–Ω</label>
        <input class="wb-input" id="phone" name="phone" type="tel" inputmode="tel" placeholder="+7 (___) ___-__-__" required>
        <div class="wb-hint">–§–æ—Ä–º–∞—Ç: +7 999 000-00-00</div>
      </div>

      <div class="wb-field">
        <label class="wb-label req">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è</label>
        <input class="wb-input" id="dob" name="birth" type="text" placeholder="–¥–¥.–º–º.–≥–≥–≥–≥" inputmode="numeric" maxlength="10" required>
      </div>

      <div class="wb-field">
        <label class="wb-label req">Telegram</label>
        <input class="wb-input" name="telegram" type="text" placeholder="@username" required>
      </div>

      <div class="wb-field wb-col">
        <label class="wb-label req">–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ —Å–º–∞—Ä—Ç—Ñ–æ–Ω–∞</label>
        <input type="hidden" name="platform" id="platform" value="iPhone">
        <div class="wb-pills" data-target="platform">
          <button type="button" class="wb-pill active" data-value="iPhone">üì± iPhone</button>
          <button type="button" class="wb-pill" data-value="Android">ü§ñ Android</button>
        </div>
      </div>

      <div class="wb-field wb-col">
        <label class="wb-label req">–û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã</label>
        <input type="hidden" name="experience" id="experience" value="–ï—Å—Ç—å –æ–ø—ã—Ç">
        <div class="wb-pills" data-target="experience">
          <button type="button" class="wb-pill active" data-value="–ï—Å—Ç—å –æ–ø—ã—Ç">‚úÖ –ï—Å—Ç—å –æ–ø—ã—Ç</button>
          <button type="button" class="wb-pill" data-value="–ë–µ–∑ –æ–ø—ã—Ç–∞">üå± –ë–µ–∑ –æ–ø—ã—Ç–∞</button>
        </div>
      </div>

      <div class="wb-field">
        <label class="wb-label req">–°–∫–æ–ª—å–∫–æ —á–∞—Å–æ–≤ –≥–æ—Ç–æ–≤—ã —É–¥–µ–ª—è—Ç—å –≤ –¥–µ–Ω—å?</label>
        <input class="wb-input" name="hours" type="text" placeholder="–ù–∞–ø—Ä. 4" required>
      </div>

      <div class="wb-field">
        <label class="wb-label req">–ì—Ä–∞—Ñ–∏–∫ ‚Äî –Ω–∞–ø–∏—à–∏—Ç–µ —Å–≤–æ–π</label>
        <input class="wb-input" name="schedule" type="text" placeholder="–ù–∞–ø—Ä. 5/2 –∏–ª–∏ –≥–∏–±–∫–∏–π" required>
      </div>
    </div>

    <div class="wb-actions">
      <button class="wb-btn" type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∞–Ω–∫–µ—Ç—É</button>
    </div>

    <div class="wb-badges" aria-hidden="true">
      <span class="wb-badge">üí≥ –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –≤—ã–ø–ª–∞—Ç—ã</span>
      <span class="wb-badge">üéß –†–∞–±–æ—Ç–∞ –≤ —á–∞—Ç–µ</span>
      <span class="wb-badge">üè° –ü–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª—ë–Ω–Ω–æ</span>
    </div>
    <div class="wb-foot">¬© 2025 Wildberries ‚Äî –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ü–ü–í–ó</div>
  </form>
</section>

<footer class="wrap center copy">
  ¬© 2025 Wildberries ‚Äî –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ü–ü–í–ó
</footer>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ -->
<div id="okModal" class="modal hidden">
  <div class="modal-card">
    <div class="modal-title">–ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞</div>
    <p class="center muted">–û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç—Ä–µ–∫-–∫–æ–¥ –º–µ–Ω–µ–¥–∂–µ—Ä—É –≤ Telegram<br>
      <a class="tg" href="https://t.me/WILDBERRIES_EKATERINA" target="_blank" rel="noopener">@WILDBERRIES_EKATERINA</a>
    </p>

    <div class="code-pill">
      <span class="ok-check">‚úÖ</span>
      <span class="muted">–í–∞—à —Ç—Ä–µ–∫-–∫–æ–¥:</span>
      <span id="trackCode" class="big-code">0000</span>
    </div>

    <div class="pill-actions">
      <button id="copyTrack" class="btn-copy">üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
      <a href="https://t.me/WILDBERRIES_EKATERINA" target="_blank" rel="noopener" class="btn-tg">‚úâÔ∏è –ù–∞–ø–∏—Å–∞—Ç—å –≤ Telegram</a>
    </div>

    <button class="modal-close link-muted" aria-label="–ó–∞–∫—Ä—ã—Ç—å">–ó–∞–∫—Ä—ã—Ç—å</button>
  </div>
</div>

<script>
(function () {
  if (window.__WB_FORM_HANDLER_INSTALLED__) return;
  window.__WB_FORM_HANDLER_INSTALLED__ = true;

  const f = document.getElementById('applyForm');
  if (!f) return;

  let sending = false;
  let lastCode = window.__WB_TRACK_CODE__ || null;

  function genTrack() {
    return String(Math.floor(1000 + Math.random() * 9000));
  }
  function getVal(name) {
    const el = f.querySelector(`[name="${name}"]`);
    return el && el.value ? el.value : '-';
  }

  const ok = document.getElementById('okModal');
  const trackEl = document.getElementById('trackCode');
  const copyBtn = document.getElementById('copyTrack');
  const closeBtn = ok ? ok.querySelector('.modal-close') : null;
  function openModal() { if (ok) ok.classList.remove('hidden'); }
  function closeModal() { if (ok) ok.classList.add('hidden'); }
  if (closeBtn) closeBtn.addEventListener('click', closeModal);
  if (ok) ok.addEventListener('click', e => { if (e.target === ok) closeModal(); });
  if (copyBtn)
    copyBtn.addEventListener('click', () => {
      if (trackEl) navigator.clipboard.writeText(trackEl.textContent || '');
      copyBtn.textContent = '‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ';
      setTimeout(() => copyBtn.textContent = 'üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å', 1200);
    });

  f.addEventListener('submit', async (e) => {
    e.preventDefault();
    if (sending) return;
    if (f.checkValidity && !f.checkValidity()) {
      f.reportValidity();
      return;
    }
    sending = true;

    if (!lastCode) lastCode = genTrack();
    window.__WB_TRACK_CODE__ = lastCode;

    const data = {
      firstName: getVal('firstName'),
      lastName: getVal('lastName'),
      middleName: getVal('middleName'),
      phone: getVal('phone'),
      birth: getVal('birth'),
      telegram: getVal('telegram'),
      platform: getVal('platform'),
      experience: getVal('experience'),
      hours: getVal('hours'),
      schedule: getVal('schedule')
    };

    const text = `üü£ –ù–æ–≤–∞—è –∞–Ω–∫–µ—Ç–∞
üë§ –ò–º—è: ${data.firstName}
üßæ –§–∞–º–∏–ª–∏—è: ${data.lastName}
üß© –û—Ç—á–µ—Å—Ç–≤–æ: ${data.middleName}
üìû –¢–µ–ª–µ—Ñ–æ–Ω: ${data.phone}
üéÇ –î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è: ${data.birth}
üí¨ Telegram: ${data.telegram}
üì± –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞: ${data.platform}
üíº –û–ø—ã—Ç: ${data.experience}
‚è±Ô∏è –ß–∞—Å—ã/–¥–µ–Ω—å: ${data.hours}
üóìÔ∏è –ì—Ä–∞—Ñ–∏–∫: ${data.schedule}
üî¢ –¢—Ä–µ–∫-–∫–æ–¥: ${lastCode}`;

    try {
      await fetch('/api/telegram', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ text, track: lastCode }),
      });
    } catch (err) {
      console.warn('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏', err);
    }

    if (trackEl) trackEl.textContent = lastCode;
    openModal();
    sending = false;
  });
})();
</script>

</body>
</html>
